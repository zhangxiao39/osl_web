<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>库存明细</title>
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
	<link th:href="@{/css/plugins/sweetalert/sweetalert.css}"
		  rel="stylesheet" />

	<!-- Data Tables -->
	<link th:href="@{/css/plugins/dataTables/datatables.min.css}"
		  rel="stylesheet">

	<link th:href="@{/css/plugins/select2/select2.min.css}"
		  rel="stylesheet">

	<link th:href="@{/css/plugins/datapicker/datepicker3.css}"
		  rel="stylesheet">

	<link th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet" />
	<link th:href="@{/css/style.css}" rel="stylesheet" />

	<link th:href="@{/css/plugins/iCheck/custom.css}" rel="stylesheet" />
	<link th:href="@{/css/plugins/footable/footable.core.css}"
		  rel="stylesheet" />

</head>

<body>

	<div id="wrapper">
		<nav class="navbar-default navbar-static-side" role="navigation"
			th:include="/w/nav :: navigation"></nav>
		<div id="page-wrapper" class="gray-bg">
			<div class="border-bottom" th:include="/w/header :: headerTop"></div>
			<div class="row wrapper border-bottom white-bg page-heading"
				th:fragment="headerNav">
				<div class="col-lg-10">
					<h2>库存明细</h2>
					<ol class="breadcrumb">
						<li><a href="#">首页</a></li>
						<li><a>库存管理</a></li>
						<li class="active"><strong>库存明细</strong></li>
					</ol>
				</div>
				<div class="col-lg-2"></div>
			</div>

			<div class="wrapper wrapper-content animated fadeInRight">
				<div class="row">
					<div class="col-lg-12">
						<div class="ibox float-e-margins">
							<div class="ibox-title">
								<h5>搜索&amp;操作</h5>
								<div class="ibox-tools">
									<a class="collapse-link"> <i class="fa fa-chevron-up"></i>
									</a>
								</div>
							</div>
							<div class="ibox-content" style="display: block;">
								<div class="row">
									<!--</div>-->
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="quantity2">货架ID</label> <input
												type="text" id="shevelsId" name="quantity2" value=""
												class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="quantity3">管理ID</label> <input
												type="text" id="manangeId" name="quantity3"
												class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group" id="input_date">
											<label class="control-label">入库期间</label>
											<!--<div class="input-daterange input-group" id="datepicker">-->
												<!--<input type="text" class="form-control"-->
													<!--name="start" id="startDate"> <span-->
													<!--class="input-group-addon">至</span> <input type="text"-->
													<!--class="form-control" name="end" id="endDate">-->
											<!--</div>-->
											<div class="input-daterange input-group" id="datepicker">
												<input type="text" class="form-control" name="start"
													   id="startDate"> <span class="input-group-addon">至</span>
												<input type="text" class="form-control" name="end" id="endDate">
											</div>
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="quantity4">库存数量</label> <input
												type="text" id="nums" name="quantity4" value=""
												class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group z-t">
											<button type="button" class="btn btn-primary" onclick="searchStock()">检索</button>
											<button type="button" class="btn btn-primary"
												onclick="history.go(-1);">返回一览</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-12">
						<div class="ibox float-e-margins">
							<div class="ibox-title">
								<h5>商品列表</h5>
								<div class="ibox-tools">
									<a class="collapse-link"> <i class="fa fa-chevron-up"></i>
									</a>
								</div>
							</div>
							<div class="ibox-content">
								<div class="table-responsive">
									<table class="table table-striped table-bordered table-hover dataTables-example" id="data_table"  th:fragment="table_refresh">
										<thead>
											<tr>
												<th>#</th>
												<th>管理ID</th>
												<th style="display: none">商品id</th>
												<th>所属商家</th>
												<th>入库时间</th>
												<th>SKU</th>
												<th>分类</th>
												<th>名称</th>
												<th>在库数量</th>
												<th>状态</th>
												<th>有效期</th>
												<th>仓库ID</th>
												<th>货架ID</th>
												<th>区域ID</th>
												<th>操作</th>
											</tr>
										</thead>
										<tbody>
										<tr th:each="p,pIndex:${item}">
											<td th:text="${pIndex.count}"></td>
											<td th:text="${p.goodsId}" style="display: none" id="goodsId"></td>
											<td th:text="${p.manageId}"></td>
											<td th:text="${p.bUserName}"></td>
											<td th:text="${p.inputTime}"></td>
											<td th:text="${p.sku}"></td>
											<td th:text="${p.categoryName}"></td>
											<td th:text="${p.goodsName}"></td>
											<td th:text="${p.nums}"></td>
											<!--<td th:text="${p.goodsType == 0 }?'不良品':'良品'"></td>-->
											<td th:if="${p.goodsType == 0}">良品</td>
											<td th:if="${p.goodsType == 1}">不良品</td>
											<td th:if="${p.goodsType == 2}">废弃品</td>
											<!--<td th:text="${p.goodsType == 0 ?'良品':p.goodsType == 1 ?'不良品':p.goodsType == 2 ?'废弃品'"></td>-->

											<td th:text="${p.validityTime}"></td>
											<td th:text="${p.depotId}"></td>
											<td th:text="${p.shelvesId}"></td>
											<td></td>
											<td>
												<button class="btn btn-info btn-xs dropdown-toggle"
														type="button"
														th:onclick="updateStock([[${p.manageId}]])">
													<i class="fa fa-edit"></i>状态更改
												</button>
											</td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="footer" th:include="/w/footer :: copyright"></div>
		</div>
	</div>

	<!--更改库存状态-->
	<div class="modal inmodal fade"  id="myModal" tabindex="-1" role="dialog"
		 aria-hidden="true" style="display: none;">
		<div class="modal-dialog">
			<div class="modal-content animated bounceInRight">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">
						<span aria-hidden="true">×</span><span class="sr-only">Close</span>
					</button>
					<h4 class="modal-title">更改库存</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" id="myform">
						<div class="form-group">
							<label class="col-lg-3 control-label">商品名称</label>
							<div class="col-lg-9">
								<input type="text" class="form-control" id="upGoodsName" disabled="disabled">
								<input type="text" class="form-control" id="shelvesId" name="shelvesId" style="display: none">
								<input type="text" class="form-control" id="validityTime" name="validityTime" style="display: none">
								<input type="text" class="form-control" id="depotId"name="depotId" style="display: none">
								<input type="text" class="form-control" id="goodsType" name="goodsType" style="display: none">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label">入库时间</label>
							<div class="col-lg-9">
								<input type="type"  class="form-control" id="upInputDate" disabled="disabled">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label">原数量</label>
							<div class="col-lg-9">
								<input type="text" id="upNums" class="form-control" disabled="disabled">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label">在库类型</label>
							<div class="col-lg-9">
								<input type="text" id="upType" class="form-control" disabled="disabled">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label">修改类型</label>
							<div class="col-lg-9">
								<label class="radio-inline">
									<input type="radio" value="0" name="goodsType">良品
								</label>
								<label class="radio-inline">
									<input type="radio" value="1" name="goodsType">不良品
								</label>
								<label class="radio-inline">
									<input type="radio" value="2" name="goodsType">废弃品
							</label>

							</div>
						</div>

						<div class="form-group">
							<label class="col-lg-3 control-label">修改数量</label>
							<div class="col-lg-9">
								<input type="text" name="nums" id="upNum" class="form-control">
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary" onclick="updateStockSubmit()">确认</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Mainly scripts -->
	<script th:src="@{/js/jquery-3.1.1.min.js}"></script>

	<script th:src="@{/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/plugins/sweetalert/sweetalert.min.js}"></script>
	<script th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
	<script th:src="@{/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>

	<script th:src="@{/js/jquery.validate.min.js}"></script>

	<!-- Data Tables -->
	<script th:src="@{/js/plugins/dataTables/datatables.min.js}"></script>
	<script th:src="@{/js/plugins/select2/select2.full.min.js}"></script>

	<!-- Peity -->
	<script th:src="@{/js/plugins/peity/jquery.peity.min.js}"></script>

	<!-- Custom and plugin javascript -->
	<script th:src="@{/js/inspinia.js}"></script>
	<script th:src="@{/js/plugins/pace/pace.min.js}"></script>

	<!-- iCheck -->
	<script th:src="@{/js/plugins/iCheck/icheck.min.js}"></script>

	<!-- Peity -->
	<script th:src="@{/js/demo/peity-demo.js}"></script>
	<!-- Data picker -->
	<script th:src="@{/js/plugins/datapicker/bootstrap-datepicker.js}"></script>
	<!-- FooTable -->
	<script th:src="@{/js/plugins/footable/footable.all.min.js}"></script>

	<!-- common -->
	<script th:src="@{/js/common.js}"></script>
	<script th:src="@{/js/stock/stockDetail.js}"></script>

	<script th:inline="javascript">
        $(document).ready(function() {
            $('.footable').footable();
            $('.i-checks').iCheck({
                checkboxClass : 'icheckbox_square-green',
                radioClass : 'iradio_square-green',
            });
            $('#input_date .input-daterange').datepicker({
                format : 'yyyy-mm-dd',
                language : 'zh-CN',
                todayBtn : "linked",//显示‘今日’按钮
                clearBtn : true,//清除按钮
                keyboardNavigation : false,
                forceParse : false,
                autoclose : true
            });
        });
	</script>

</body>

</html>
