<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.osl.mapper.SellshipMapper">
	<select id="findAll" resultType="com.osl.model.SellshipModel">
		select
		t_sellship.*,t_sellplatform.name as platformName from
		t_sellship,t_sellplatform
		where t_sellship.delete_flg=0 and
		t_sellship.platform_id=t_sellplatform.id
	</select>
	<select id="find_sellshipBusiness_All"
		resultType="com.osl.model.SellshipModel"
		parameterType="com.osl.model.SellshipModel">
		select DISTINCT
		v_sellship.*, t_sellplatform.name as platformName from
		v_sellship,t_sellplatform where
		v_sellship.platform_id=t_sellplatform.id and
		v_sellship.business_id=#{businessId}
		<if test="sku !=null and sku != ''">
			and v_sellship.sku= #{sku}
		</if>
		<if test="sellId !=null and sellId != ''">
			and v_sellship.sell_id= #{sellId}
		</if>
		<if
			test="platformId !=null and platformId != '' and platformId != '0'">
			and t_sellplatform.id= #{platformId}
		</if>
		<if test="type !=null and type != '' and type == 1">
			and v_sellship.type=0
		</if>
		<if test="type !=null and type != '' and type == 2">
			and v_sellship.type=1
		</if>
	</select>
	<select id="find_sellshipBusiness_All_bar"
		resultType="com.osl.model.SellshipModel" parameterType="int">
		select DISTINCT
		v_sellship.*, t_sellplatform.name as platformName from
		v_sellship,t_sellplatform where
		v_sellship.platform_id=t_sellplatform.id and
		v_sellship.business_id=#{businessId}
		<if test="sku !=null and sku != ''">
			and v_sellship.sku= #{sku}
		</if>
		<if test="sellId !=null and sellId != ''">
			and v_sellship.sell_id= #{sellId}
		</if>
		<if
			test="platformId !=null and platformId != '' and platformId != '0'">
			and t_sellplatform.id= #{platformId}
		</if>
		<if test="type !=null and type != '' and type == 1">
			and v_sellship.type=0
		</if>
		<if test="type !=null and type != '' and type == 2">
			and v_sellship.type=1
		</if>
	</select>
	<select id="find_sellshipBusiness_sellId"
		resultType="com.osl.model.SellshipModel">
		select * from
		t_sellship
		where delete_flg=0 and
		business_id=#{bid} and sell_id=#{sellId} and platform_id=#{platformId}
	</select>
	<insert id="insertSellship"
		parameterType="com.osl.mapper.entity.SellshipEntity">
		insert into t_sellship
		(sell_id,goods_id,platform_id,business_id,type,new_date)
		values
		(#{sellId},#{goodsId},#{platformId},#{businessId},#{type},now())
	</insert>
	<update id="deleteById" parameterType="int">
		update t_sellship set
		delete_flg=1 where id=#{id}
	</update>
	<update id="updateSellship"
		parameterType="com.osl.mapper.entity.SellshipEntity">
		update t_sellship set
		sell_id=#{sellId},
		goods_id=#{goodsId},
		platform_id=#{platformId},
		business_id=#{businessId},
		type=#{type}
		where
		id=#{id}
	</update>
	<select id="findById" parameterType="int"
		resultType="com.osl.mapper.entity.SellshipEntity">
		select * from t_sellship
		where id=#{id}
	</select>
	<select id="showById" parameterType="int"
		resultType="com.osl.model.SellshipModel">
		select DISTINCT
		v_sellship.*, t_sellplatform.name as
		platformName from
		v_sellship,t_sellplatform where
		v_sellship.platform_id=t_sellplatform.id and
		v_sellship.id=#{id}
	</select>
	<select id="findByGoodsId" parameterType="String"
		resultType="com.osl.mapper.entity.SellshipEntity">
		select * from t_sellship
		where goods_id=#{goodsId}
	</select>
</mapper>